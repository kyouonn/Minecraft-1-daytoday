<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>プレイ日数 ⇄ 日付 変換ツール（1年目うるう年）</title>
<style>
    body {
        font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
        background: #0f172a;
        color: #e5e7eb;
        margin: 0;
        padding: 0;
    }

    .container {
        max-width: 700px;
        margin: 40px auto;
        padding: 24px;
        background: #1e293b;
        border-radius: 16px;
        box-shadow: 0 10px 25px rgba(0,0,0,0.4);
    }

    h1 {
        text-align: center;
        margin-bottom: 20px;
    }

    h2 {
        margin-top: 32px;
        font-size: 18px;
        border-bottom: 1px solid #334155;
        padding-bottom: 6px;
    }

    label {
        display: block;
        margin-top: 12px;
        margin-bottom: 6px;
        font-weight: bold;
    }

    input, button {
        width: 100%;
        padding: 10px;
        border-radius: 8px;
        border: none;
        font-size: 16px;
    }

    input {
        background: #334155;
        color: #e5e7eb;
    }

    button {
        margin-top: 12px;
        background: #38bdf8;
        color: #020617;
        font-weight: bold;
        cursor: pointer;
    }

    button:hover {
        background: #0ea5e9;
    }

    .result {
        margin-top: 16px;
        padding: 14px;
        background: #020617;
        border-radius: 12px;
        text-align: center;
        font-size: 17px;
    }

    .note {
        margin-top: 20px;
        font-size: 14px;
        color: #94a3b8;
        text-align: center;
    }
</style>
</head>
<body>
<div class="container">
    <h1>プレイ日数 ⇄ 日付 変換ツール</h1>

    <h2>① プレイ日数 → 日付</h2>
    <label for="days">プレイ日数</label>
    <input type="number" id="days" placeholder="例: 0, 365, 366, 730" min="0">
    <button onclick="daysToDate()">日付に変換</button>
    <div class="result" id="resultDays">ここに結果が表示されます</div>

    <h2>② 日付 → プレイ日数</h2>
    <label for="dateInput">日付 (年/月/日)</label>
    <input type="text" id="dateInput" placeholder="例: 3/5/12">
    <button onclick="dateToDays()">プレイ日数に変換</button>
    <div class="result" id="resultDate">ここに結果が表示されます</div>

    <div class="note">
        ※ プレイ日数0 = 1年1月1日<br>
        ※ 1年目・5年目・9年目… がうるう年（366日）
    </div>
</div>

<script>
// 1年目がうるう年
function isLeapYear(year) {
    return year % 4 === 1;
}

function daysInYear(year) {
    return isLeapYear(year) ? 366 : 365;
}

function daysInMonth(year, month) {
    const monthDays = [31, isLeapYear(year) ? 29 : 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
    return monthDays[month - 1];
}

// プレイ日数 → 日付
function daysToDate() {
    const days = parseInt(document.getElementById('days').value);
    const result = document.getElementById('resultDays');

    if (isNaN(days) || days < 0) {
        result.textContent = '正しいプレイ日数を入力してください';
        return;
    }

    let remainingDays = days;
    let year = 1;

    while (remainingDays >= daysInYear(year)) {
        remainingDays -= daysInYear(year);
        year++;
    }

    let month = 1;
    while (remainingDays >= daysInMonth(year, month)) {
        remainingDays -= daysInMonth(year, month);
        month++;
    }

    const day = remainingDays + 1;

    result.innerHTML = `<strong>${year}年${month}月${day}日</strong>`;
}

// 日付 → プレイ日数
function dateToDays() {
    const input = document.getElementById('dateInput').value.trim();
    const result = document.getElementById('resultDate');

    const parts = input.split('/');
    if (parts.length !== 3) {
        result.textContent = '形式は 年/月/日 で入力してください';
        return;
    }

    const year = parseInt(parts[0]);
    const month = parseInt(parts[1]);
    const day = parseInt(parts[2]);

    if (
        isNaN(year) || isNaN(month) || isNaN(day) ||
        year < 1 || month < 1 || month > 12 || day < 1 || day > daysInMonth(year, month)
    ) {
        result.textContent = '正しい日付を入力してください';
        return;
    }

    let totalDays = 0;

    // 年の分
    for (let y = 1; y < year; y++) {
        totalDays += daysInYear(y);
    }

    // 月の分
    for (let m = 1; m < month; m++) {
        totalDays += daysInMonth(year, m);
    }

    // 日の分
    totalDays += day - 1;

    result.innerHTML = `<strong>プレイ日数: ${totalDays}</strong>`;
}
</script>
</body>
</html>
